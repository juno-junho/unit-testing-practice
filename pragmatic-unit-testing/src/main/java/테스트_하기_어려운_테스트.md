테스트 하기 어려운 코드를 테스트 가능한 구조로 리펙토링 하는 방법

1. 테스트 하기 어려운 코드를 메서드 외부로 빼서 파라미터로 입력받는다.
2. 메서드 시그니처 수정하지 않는 법 : 메서드로 테스트하기 어려운 코드를 분리한 다음 protected 로 설정해 상속가능한 구조로 변경한다.
3. 인터페이스로 분리해 DI를 사용한다.

변경/확장 가능성이 크다면 앞서 말한 테스트 하기 어려운 코드를 메서드 외부로 빼거나 상속가능한 구조로 변경하는 것 보다 인터페이스로 분리해 DI 하는 방식이 더 객체지향적인 구조라 할 수 있겠다 (OCP)